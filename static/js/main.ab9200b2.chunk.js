(this["webpackJsonpfinbox-mini-app"]=this["webpackJsonpfinbox-mini-app"]||[]).push([[0],{140:function(e,t,n){},142:function(e,t,n){"use strict";n.r(t);var c=n(5),r=n(0),a=n.n(r),s=n(25),i=n.n(s),o=n(27),j=n(21),d=n(50),l=n(44),u=n.n(l),b=n(45),h="SET_USER",O="FETCH_ACCESS_TOKEN",p={access_token:""};var x=function(e){return e.user},f=Object(j.combineReducers)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h:return t.payload.user;default:return e}}}),v=n(23),m=n.n(v),k=n(29),w=n(26),C=n.n(w),_=m.a.mark(g);function g(){var e;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,C.a.send("VKWebAppGetAuthToken",{app_id:7712603,scope:"friends"}).catch((function(){alert("\u041f\u0440\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u043e \u043a\u0440\u0438\u0442\u0438\u0447\u0435\u0441\u043a\u0430\u044f \u043e\u0448\u0438\u0431\u043a\u0430. \u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0435 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435.")}));case 2:return e=t.sent,t.next=5,Object(k.b)({type:h,payload:{user:{access_token:e.access_token}}});case 5:case"end":return t.stop()}}),_)}var y=m.a.mark(A);function A(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(k.c)(O,g);case 2:case"end":return e.stop()}}),y)}var S=m.a.mark(E);function E(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(k.a)([A()]);case 2:case"end":return e.stop()}}),S)}var M=n(46),T=Object(d.a)(),P=Object(j.createStore)(f,Object(b.composeWithDevTools)(Object(j.applyMiddleware)(u.a,T)));Object(M.a)();T.run(E);var N=n(28),K=n(8),W=n(147),z=n(148);function I(){return{type:O}}var J=n(145),R=n(146);function V(e){return Object(c.jsx)(K.n,{id:e.id,children:Object(c.jsx)(K.o,{children:"\u041a\u0430\u0442\u0430\u043b\u043e\u0433"})})}var q=n(49),B=(n(140),Object(q.block)("dashboard-card"));function D(e){return Object(c.jsx)(K.c,{children:Object(c.jsxs)("div",{className:B(),children:[Object(c.jsx)("span",{className:B("subtitle"),children:e.subtitle}),Object(c.jsx)("strong",{className:B("title"),children:e.title})]})})}function F(){return Object(c.jsx)(K.h,{header:Object(c.jsx)(K.i,{mode:"primary",children:"\u0410\u043a\u0442\u0438\u0432\u043d\u044b\u0435 \u0434\u043e\u043b\u0433\u0438"}),mode:"plain",children:Object(c.jsx)(K.d,{size:"m",children:Object(c.jsx)(D,{subtitle:"\u0414\u0430\u043b \u0432 \u0434\u043e\u043b\u0433",title:"125 000 \u20bd"})})})}var G,H=Object(o.b)((function(e){return{access_token:x(e).access_token}}))((function(e){var t=a.a.useState([]),n=Object(N.a)(t,2),r=n[0],s=n[1];return a.a.useEffect((function(){C.a.send("VKWebAppCallAPIMethod",{method:"friends.get",params:{order:"hints",fields:"nickname,photo_100",v:"5.21",access_token:e.access_token}}).then((function(e){return s(e.response.items)})).catch((function(e){return console.error(e)}))}),[e]),Object(c.jsx)(K.h,{header:Object(c.jsx)(K.i,{mode:"primary",children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b"}),mode:"plain",children:function(e){return e.map((function(e){return Object(c.jsxs)(K.q,{before:Object(c.jsx)(K.b,{src:e.photo_100,size:48}),children:[e.first_name," ",e.last_name]})}))}(r)})})),U=n(143),L=n(144);function Q(e){return Object(c.jsxs)(K.h,{header:Object(c.jsx)(K.i,{mode:"secondary",children:"\u041d\u0435\u0442 \u043f\u0440\u043e\u0441\u0440\u043e\u0447\u0435\u043d\u043d\u044b\u0445 \u0434\u043e\u043b\u0433\u043e\u0432"}),children:[Object(c.jsx)(K.e,{before:Object(c.jsx)(U.a,{}),disabled:!0,children:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0441\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0443"}),Object(c.jsx)(K.e,{before:Object(c.jsx)(L.a,{}),onClick:function(){return e.onModalShow&&e.onModalShow("add-debt")},children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0434\u043e\u043b\u0433"})]})}function X(e){return Object(c.jsxs)(K.n,{id:e.id,children:[Object(c.jsx)(K.o,{children:"\u0414\u043e\u043b\u0433\u0438"}),Object(c.jsx)(Q,{onModalShow:e.onShowModal}),Object(c.jsx)(F,{}),Object(c.jsx)(H,{})]})}function Y(e){var t=a.a.useState(null),n=Object(N.a)(t,2),r=n[0],s=n[1];var i=Object(c.jsx)(K.m,{activeModal:r,onClose:function(){return s(null)},children:Object(c.jsx)(K.k,{id:"add-debt",header:Object(c.jsx)(K.l,{left:Object(c.jsx)(K.p,{onClick:function(){return s(null)},children:Object(c.jsx)(J.a,{})}),right:Object(c.jsx)(K.p,{children:Object(c.jsx)(R.a,{})}),children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0434\u043e\u043b\u0433"}),children:Object(c.jsx)(K.h,{children:Object(c.jsx)(K.g,{top:"\u0421\u0443\u043c\u043c\u0430",children:Object(c.jsx)(K.j,{placeholder:"\u041a \u043f\u0440\u0438\u043c\u0435\u0440\u0443: 347 \u20bd"})})})})});return Object(c.jsx)(K.t,{id:e.id,modal:i,activePanel:e.activePanel,children:Object(c.jsx)(X,{id:e.id,onShowModal:function(e){return s(e)}})})}function Z(e){return Object(c.jsx)(K.t,{id:e.id,activePanel:e.activePanel,children:Object(c.jsx)(V,{id:e.id})})}!function(e){e.Catalog="catalog",e.App="app"}(G||(G={}));var $=G;var ee=Object(o.b)(null,(function(e){return{fetchAccessToken:Object(j.bindActionCreators)(I,e)}}))((function(e){var t=a.a.useState($.App),n=Object(N.a)(t,2),r=n[0],s=n[1];function i(e){return s(e.currentTarget.dataset.story)}return a.a.useEffect((function(){e.fetchAccessToken()}),[e]),Object(c.jsx)(K.a,{children:Object(c.jsxs)(K.f,{activeStory:r,tabbar:Object(c.jsxs)(K.r,{children:[Object(c.jsx)(K.s,{onClick:i,selected:r===$.Catalog,"data-story":$.Catalog,children:Object(c.jsx)(W.a,{})}),Object(c.jsx)(K.s,{onClick:i,selected:r===$.App,"data-story":$.App,children:Object(c.jsx)(z.a,{})})]}),children:[Object(c.jsx)(Z,{id:$.Catalog,activePanel:$.Catalog}),Object(c.jsx)(Y,{id:$.App,activePanel:$.App})]})})}));function te(){return Object(c.jsx)(o.a,{store:P,children:Object(c.jsx)(ee,{})})}n(141);i.a.render(Object(c.jsx)(te,{}),document.getElementById("root"))}},[[142,1,2]]]);
//# sourceMappingURL=main.ab9200b2.chunk.js.map