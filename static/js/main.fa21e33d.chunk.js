(this["webpackJsonpfinbox-mini-app"]=this["webpackJsonpfinbox-mini-app"]||[]).push([[0],{139:function(e,t,c){},141:function(e,t,c){"use strict";c.r(t);var n=c(3),r=c(0),s=c.n(r),a=c(26),i=c.n(a),o=c(28),j=c(21),l=c(50),d=c(45),u=c.n(d),b=c(46),O="SET_USER",h="FETCH_ACCESS_TOKEN",p={access_token:""};var x=function(e){return e.user},f=Object(j.combineReducers)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O:return t.payload.user;default:return e}}}),v=c(23),m=c.n(v),k=c(29),g=c(27),C=c.n(g),A=m.a.mark(_);function _(){var e;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,C.a.send("VKWebAppGetAuthToken",{app_id:7712603,scope:"friends"}).catch((function(){alert("\u041f\u0440\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u043e \u043a\u0440\u0438\u0442\u0438\u0447\u0435\u0441\u043a\u0430\u044f \u043e\u0448\u0438\u0431\u043a\u0430. \u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0435 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435.")}));case 2:return e=t.sent,t.next=5,Object(k.b)({type:O,payload:{user:{access_token:e.access_token}}});case 5:case"end":return t.stop()}}),A)}var y=m.a.mark(w);function w(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(k.c)(h,_);case 2:case"end":return e.stop()}}),y)}var E=m.a.mark(T);function T(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(k.a)([w()]);case 2:case"end":return e.stop()}}),E)}var S=c(47),M=Object(l.a)(),N=Object(j.createStore)(f,Object(b.composeWithDevTools)(Object(j.applyMiddleware)(u.a,M)));Object(S.a)();M.run(T);var z=c(25);function K(){return{type:h}}var P=c(7);function W(e){return Object(n.jsx)(P.o,{id:e.id,children:Object(n.jsx)(P.p,{children:"\u041a\u0430\u0442\u0430\u043b\u043e\u0433"})})}var q=c(144),I=c(35),J=(c(139),Object(I.block)("dashboard-card"));function R(e){return Object(n.jsx)(P.d,{children:Object(n.jsxs)("div",{className:J(),children:[Object(n.jsx)("span",{className:J("subtitle"),children:e.subtitle}),Object(n.jsx)("strong",{className:J("title"),children:e.title})]})})}function V(){return Object(n.jsx)(P.i,{header:Object(n.jsx)(P.j,{mode:"primary",children:"\u0410\u043a\u0442\u0438\u0432\u043d\u044b\u0435 \u0434\u043e\u043b\u0433\u0438"}),mode:"plain",children:Object(n.jsx)(P.e,{size:"m",children:Object(n.jsx)(R,{subtitle:"\u0414\u0430\u043b \u0432 \u0434\u043e\u043b\u0433",title:"125 000 \u20bd"})})})}var B,D=Object(o.b)((function(e){return{access_token:x(e).access_token}}))((function(e){var t=s.a.useState([]),c=Object(z.a)(t,2),r=c[0],a=c[1];return s.a.useEffect((function(){C.a.send("VKWebAppCallAPIMethod",{method:"friends.get",params:{order:"hints",fields:"nickname,photo_100",v:"5.21",access_token:e.access_token}}).then((function(e){return a(e.response.items)})).catch((function(e){return console.error(e)}))}),[e]),Object(n.jsx)(P.i,{header:Object(n.jsx)(P.j,{mode:"primary",children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b"}),mode:"plain",children:function(e){return e.map((function(e){return Object(n.jsxs)(P.r,{before:Object(n.jsx)(P.b,{src:e.photo_100,size:48}),children:[e.first_name," ",e.last_name]})}))}(r)})})),F=c(142),G=c(143);Object(I.block)("event-button");function H(e){return Object(n.jsxs)(P.o,{id:e.id,children:[Object(n.jsx)(P.p,{children:"\u0414\u043e\u043b\u0433\u0438"}),Object(n.jsx)(P.i,{children:Object(n.jsx)(P.f,{children:Object(n.jsx)(P.c,{before:Object(n.jsx)(q.a,{}),size:"l",stretched:!0,onClick:function(){return e.onToggleEventModal()},children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0434\u043e\u043b\u0433"})})}),Object(n.jsx)(V,{}),Object(n.jsx)(D,{})]})}!function(e){e.Catalog="catalog",e.App="app"}(B||(B={}));var U=B,L=c(145),Q=c(146);var X=Object(o.b)(null,(function(e){return{fetchAccessToken:Object(j.bindActionCreators)(K,e)}}))((function(e){var t=s.a.useState(U.App),c=Object(z.a)(t,2),r=c[0],a=c[1],i=s.a.useState(null),o=Object(z.a)(i,2),j=o[0],l=o[1];function d(e){return a(e.currentTarget.dataset.story)}s.a.useEffect((function(){e.fetchAccessToken()}),[e]);var u=Object(n.jsx)(P.n,{activeModal:j,onClose:function(){return l(null)},children:Object(n.jsx)(P.l,{id:"add-event",header:Object(n.jsx)(P.m,{left:Object(n.jsx)(P.q,{onClick:function(){return l(null)},children:Object(n.jsx)(F.a,{})}),right:Object(n.jsx)(P.q,{children:Object(n.jsx)(G.a,{})}),children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0434\u043e\u043b\u0433"}),children:Object(n.jsxs)(P.i,{children:[Object(n.jsx)(P.h,{top:"\u0421\u0443\u043c\u043c\u0430",children:Object(n.jsx)(P.k,{placeholder:"\u041a \u043f\u0440\u0438\u043c\u0435\u0440\u0443: 347 \u20bd"})}),Object(n.jsx)(P.h,{top:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442",children:Object(n.jsx)(P.k,{placeholder:"\u041a \u043f\u0440\u0438\u043c\u0435\u0440\u0443: 347 \u20bd"})}),Object(n.jsx)(P.h,{top:"\u0414\u0430\u0442\u0430 \u0432\u043e\u0437\u0432\u0440\u0430\u0442\u0430",children:Object(n.jsx)(P.k,{placeholder:"\u041a \u043f\u0440\u0438\u043c\u0435\u0440\u0443: 347 \u20bd"})})]})})});return Object(n.jsx)(P.a,{children:Object(n.jsxs)(P.g,{activeStory:r,tabbar:Object(n.jsxs)(P.s,{children:[Object(n.jsx)(P.t,{onClick:d,selected:r===U.Catalog,"data-story":U.Catalog,children:Object(n.jsx)(L.a,{})}),Object(n.jsx)(P.t,{onClick:d,selected:r===U.App,"data-story":U.App,children:Object(n.jsx)(Q.a,{})})]}),children:[Object(n.jsx)(P.u,{id:U.Catalog,activePanel:U.Catalog,children:Object(n.jsx)(W,{id:U.Catalog})}),Object(n.jsx)(P.u,{id:U.App,modal:u,activePanel:U.App,children:Object(n.jsx)(H,{id:U.App,onToggleEventModal:function(){return l("add-event")}})})]})})}));function Y(){return Object(n.jsx)(o.a,{store:N,children:Object(n.jsx)(X,{})})}c(140);i.a.render(Object(n.jsx)(Y,{}),document.getElementById("root"))}},[[141,1,2]]]);
//# sourceMappingURL=main.fa21e33d.chunk.js.map