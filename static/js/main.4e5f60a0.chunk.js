(this["webpackJsonpfinbox-mini-app"]=this["webpackJsonpfinbox-mini-app"]||[]).push([[0],{287:function(e,t,n){},289:function(e,t,n){"use strict";n.r(t);var c=n(7),r=n(1),a=n.n(r),s=n(41),i=n.n(s),o=n(43),j=n(107),d={apiKey:"AIzaSyCumX0HBTrTWuiyCOkwfSmI_ro5pGEGCzM",authDomain:"finbox-mini-app.firebaseapp.com",databaseURL:"https://finbox-mini-app-default-rtdb.firebaseio.com",projectId:"finbox-mini-app",storageBucket:"finbox-mini-app.appspot.com",messagingSenderId:"261332152446",appId:"1:261332152446:web:1b0638cbb10e860a86a82f"},l=n(63),b=n(37),u=n(30),p=n(108),h=n(100),O=n.n(h),f=n(101),x="SET_USER",m="FETCH_ACCESS_TOKEN",v={access_token:""};var w="SET_FRIENDS",y=[];var k=function(e){return e.friends},S=Object(u.combineReducers)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x:return t.payload.user;default:return e}},friends:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w:return t.payload.friends;default:return e}}}),g=n(27),_=n.n(g),C=n(32),A=n(42),T=n.n(A),E=_.a.mark(P);function P(){var e,t,n,c;return _.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e=window.location.search,t=new URLSearchParams(e),n=t.get("vk_app_id"),r.next=5,T.a.send("VKWebAppGetAuthToken",{app_id:Number(n),scope:"friends"}).catch((function(){alert("\u041f\u0440\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u043e \u043a\u0440\u0438\u0442\u0438\u0447\u0435\u0441\u043a\u0430\u044f \u043e\u0448\u0438\u0431\u043a\u0430. \u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0435 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435.")}));case 5:return c=r.sent,r.next=8,Object(C.b)({type:x,payload:{user:{access_token:c.access_token}}});case 8:case"end":return r.stop()}}),E)}var z=_.a.mark(M);function M(){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(C.c)(m,P);case 2:case"end":return e.stop()}}),z)}var R=_.a.mark(U);function U(){var e;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,T.a.send("VKWebAppCallAPIMethod",{method:"friends.get",params:{order:"hints",fields:"nickname,photo_100",v:"5.21",access_token:G.getState().user.access_token}}).catch((function(){alert("\u041f\u0440\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u043e \u043a\u0440\u0438\u0442\u0438\u0447\u0435\u0441\u043a\u0430\u044f \u043e\u0448\u0438\u0431\u043a\u0430. \u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0435 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435.")}));case 2:return e=t.sent,t.next=5,Object(C.b)({type:w,payload:{friends:e.response.items}});case 5:case"end":return t.stop()}}),R)}var B=_.a.mark(I);function I(){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(C.c)(x,U);case 2:case"end":return e.stop()}}),B)}var D=_.a.mark(N);function N(){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(C.a)([M(),I()]);case 2:case"end":return e.stop()}}),D)}var K=n(102),W=Object(p.a)(),G=Object(u.createStore)(S,Object(f.composeWithDevTools)(Object(u.applyMiddleware)(O.a,W)));Object(K.a)();W.run(N);var L=n(62),V=n(10),F=n(293),H=n(294);function J(){return{type:m}}var q=n(105),X=n(109),Q=n(292),Y=n(291);function Z(e){return Object(c.jsx)(V.s,{id:e.id,children:Object(c.jsx)(V.t,{children:"\u041a\u0430\u0442\u0430\u043b\u043e\u0433"})})}var $=n(106),ee=(n(287),Object($.block)("dashboard-card"));function te(e){return Object(c.jsx)(V.d,{children:Object(c.jsxs)("div",{className:ee(),children:[Object(c.jsx)("span",{className:ee("subtitle"),children:e.subtitle}),Object(c.jsx)("strong",{className:ee("title"),children:e.title})]})})}function ne(){return Object(c.jsx)(V.m,{header:Object(c.jsx)(V.n,{mode:"primary",children:"\u0410\u043a\u0442\u0438\u0432\u043d\u044b\u0435 \u0434\u043e\u043b\u0433\u0438"}),mode:"plain",children:Object(c.jsx)(V.e,{size:"m",children:Object(c.jsx)(te,{subtitle:"\u0414\u0430\u043b \u0432 \u0434\u043e\u043b\u0433",title:"125 000 \u20bd"})})})}var ce=Object(b.b)((function(e){return{friends:k(e)}}))((function(e){return Object(c.jsx)(V.m,{header:Object(c.jsx)(V.n,{mode:"primary",children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b"}),mode:"plain",children:e.friends.length>0?(t=e.friends,t.map((function(e){return Object(c.jsxs)(V.x,{before:Object(c.jsx)(V.b,{src:e.photo_100,size:48}),children:[e.first_name," ",e.last_name]})}))):Object(c.jsx)(V.y,{size:"medium"})});var t})),re=n(290);function ae(e){return Object(c.jsxs)(V.m,{header:Object(c.jsx)(V.n,{mode:"secondary",children:"\u041d\u0435\u0442 \u043f\u0440\u043e\u0441\u0440\u043e\u0447\u0435\u043d\u043d\u044b\u0445 \u0434\u043e\u043b\u0433\u043e\u0432"}),children:[Object(c.jsx)(V.f,{before:Object(c.jsx)(re.a,{}),disabled:!0,children:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0441\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0443"}),Object(c.jsx)(V.f,{before:Object(c.jsx)(Y.a,{}),onClick:function(){return e.onModalShow&&e.onModalShow("add-debt")},children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0434\u043e\u043b\u0433"})]})}function se(e){return Object(c.jsxs)(V.s,{id:e.id,children:[Object(c.jsx)(V.t,{children:"\u0414\u043e\u043b\u0433\u0438"}),Object(c.jsx)(ae,{onModalShow:e.onShowModal}),Object(c.jsx)(ne,{}),Object(c.jsx)(ce,{})]})}var ie,oe=Object(b.b)((function(e){return{friends:k(e)}}))((function(e){var t=a.a.useState(null),n=Object(L.a)(t,2),r=n[0],s=n[1],i=window.location.search,j=new URLSearchParams(i).get("vk_user_id"),d=Object(c.jsx)(V.r,{activeModal:r,onClose:function(){return s(null)},children:Object(c.jsx)(V.p,{id:"add-debt",header:Object(c.jsx)(V.q,{left:Object(c.jsx)(V.u,{onClick:function(){return s(null)},children:Object(c.jsx)(Q.a,{})}),children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0434\u043e\u043b\u0433"}),children:Object(c.jsxs)(V.m,{children:[Object(c.jsxs)(V.k,{children:[Object(c.jsxs)(V.l,{mode:"horizontal",children:[Object(c.jsx)(V.j,{children:Object(c.jsx)(V.v,{name:"type",value:"lent",defaultChecked:!0,children:"\u0414\u0430\u043b \u0432 \u0434\u043e\u043b\u0433"})}),Object(c.jsx)(V.j,{children:Object(c.jsx)(V.v,{name:"type",value:"borrowed",children:"\u0414\u0430\u043b \u0432 \u0434\u043e\u043b\u0433"})})]}),Object(c.jsxs)(V.l,{mode:"horizontal",children:[Object(c.jsx)(V.j,{top:"\u0421\u0443\u043c\u043c\u0430",children:Object(c.jsx)(V.o,{placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u0443\u043c\u043c\u0443"})}),Object(c.jsx)(V.j,{top:"\u0412\u0430\u043b\u044e\u0442\u0430",children:Object(c.jsx)(V.w,{options:[{value:"RUB",label:"RUB"},{value:"USD",label:"USD"}],placeholder:"\u0412\u0430\u043b\u044e\u0442\u0430",defaultValue:"RUB"})})]})]}),Object(c.jsx)(V.j,{top:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442",children:Object(c.jsx)(V.w,{placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043a\u043e\u043d\u0442\u0430\u043a\u0442",options:function(e){var t=[];return e.forEach((function(e){t.push({value:e.id,label:"".concat(e.first_name," ").concat(e.last_name),avatar:e.photo_100})})),t}(e.friends),renderOption:function(e){var t=e.option,n=Object(X.a)(e,["option"]);return Object(c.jsx)(V.g,Object(o.a)(Object(o.a)({},n),{},{before:Object(c.jsx)(V.b,{size:24,src:t.avatar})}))}})}),Object(c.jsx)(V.j,{top:"\u0414\u0430\u0442\u0430 \u0432\u043e\u0437\u0432\u0440\u0430\u0442\u0430",children:Object(c.jsx)(V.h,{min:{day:1,month:1,year:1901},max:{day:1,month:1,year:2020},dayPlaceholder:"\u0414",monthPlaceholder:"\u041c\u041c",yearPlaceholder:"\u0413\u0413"})}),Object(c.jsx)(V.j,{children:Object(c.jsx)(l.a,{path:"".concat(j),type:"push",children:function(e){var t=e.runMutation;return Object(c.jsx)(V.c,{mode:"primary",size:"l",before:Object(c.jsx)(Y.a,{}),stretched:!0,onClick:Object(q.a)(_.a.mark((function e(){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t({TEST:"DATA"});case 2:case"end":return e.stop()}}),e)}))),children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"})}})})]})})});return Object(c.jsx)(V.B,{id:e.id,modal:d,activePanel:e.activePanel,children:Object(c.jsx)(se,{id:e.id,onShowModal:function(e){return s(e)}})})}));function je(e){return Object(c.jsx)(V.B,{id:e.id,activePanel:e.activePanel,children:Object(c.jsx)(Z,{id:e.id})})}!function(e){e.Catalog="catalog",e.App="app"}(ie||(ie={}));var de=ie;var le=Object(b.b)(null,(function(e){return{fetchAccessToken:Object(u.bindActionCreators)(J,e)}}))((function(e){var t=a.a.useState(de.App),n=Object(L.a)(t,2),r=n[0],s=n[1];function i(e){return s(e.currentTarget.dataset.story)}return a.a.useEffect((function(){e.fetchAccessToken()}),[e]),Object(c.jsx)(V.a,{children:Object(c.jsxs)(V.i,{activeStory:r,tabbar:Object(c.jsxs)(V.z,{children:[Object(c.jsx)(V.A,{onClick:i,selected:r===de.Catalog,"data-story":de.Catalog,children:Object(c.jsx)(F.a,{})}),Object(c.jsx)(V.A,{onClick:i,selected:r===de.App,"data-story":de.App,children:Object(c.jsx)(H.a,{})})]}),children:[Object(c.jsx)(je,{id:de.Catalog,activePanel:de.Catalog}),Object(c.jsx)(oe,{id:de.App,activePanel:de.App})]})})}));function be(){return Object(c.jsx)(l.b,Object(o.a)(Object(o.a)({firebase:j.a},d),{},{children:Object(c.jsx)(b.a,{store:G,children:Object(c.jsx)(le,{})})}))}n(288);i.a.render(Object(c.jsx)(be,{}),document.getElementById("root"))}},[[289,1,2]]]);
//# sourceMappingURL=main.4e5f60a0.chunk.js.map