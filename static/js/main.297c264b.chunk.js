(this["webpackJsonpfinbox-mini-app"]=this["webpackJsonpfinbox-mini-app"]||[]).push([[0],{132:function(e,t,n){},134:function(e,t,n){"use strict";n.r(t);var c=n(5),r=n(0),a=n.n(r),s=n(26),i=n.n(s),o=n(28),j=n(21),d=n(51),l=n(45),b=n.n(l),u=n(46),h="SET_USER",O="FETCH_ACCESS_TOKEN",x={access_token:""};var p=function(e){return e.user},f="SET_FRIENDS",v=[];var m=Object(j.combineReducers)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h:return t.payload.user;default:return e}},friends:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:return t.payload.friends;default:return e}}}),y=n(23),k=n.n(y),w=n(30),S=n(27),A=n.n(S),C=k.a.mark(_);function _(){var e;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,A.a.send("VKWebAppGetAuthToken",{app_id:7712603,scope:"friends"}).catch((function(){alert("\u041f\u0440\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u043e \u043a\u0440\u0438\u0442\u0438\u0447\u0435\u0441\u043a\u0430\u044f \u043e\u0448\u0438\u0431\u043a\u0430. \u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0435 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435.")}));case 2:return e=t.sent,t.next=5,Object(w.b)({type:h,payload:{user:{access_token:e.access_token}}});case 5:case"end":return t.stop()}}),C)}var g=k.a.mark(E);function E(){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(w.c)(O,_);case 2:case"end":return e.stop()}}),g)}var P=k.a.mark(T);function T(){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(w.a)([E()]);case 2:case"end":return e.stop()}}),P)}var z=n(47),M=Object(d.a)(),R=Object(j.createStore)(m,Object(u.composeWithDevTools)(Object(j.applyMiddleware)(b.a,M)));Object(z.a)();M.run(T);var U=n(29),N=n(7),B=n(138),D=n(139);function I(){return{type:O}}var K=n(41),V=n(52),W=n(137),F=n(136);function J(e){return Object(c.jsx)(N.s,{id:e.id,children:Object(c.jsx)(N.t,{children:"\u041a\u0430\u0442\u0430\u043b\u043e\u0433"})})}var q=n(50),G=(n(132),Object(q.block)("dashboard-card"));function H(e){return Object(c.jsx)(N.d,{children:Object(c.jsxs)("div",{className:G(),children:[Object(c.jsx)("span",{className:G("subtitle"),children:e.subtitle}),Object(c.jsx)("strong",{className:G("title"),children:e.title})]})})}function L(){return Object(c.jsx)(N.m,{header:Object(c.jsx)(N.n,{mode:"primary",children:"\u0410\u043a\u0442\u0438\u0432\u043d\u044b\u0435 \u0434\u043e\u043b\u0433\u0438"}),mode:"plain",children:Object(c.jsx)(N.e,{size:"m",children:Object(c.jsx)(H,{subtitle:"\u0414\u0430\u043b \u0432 \u0434\u043e\u043b\u0433",title:"125 000 \u20bd"})})})}var Q,X=Object(o.b)((function(e){return{access_token:p(e).access_token}}))((function(e){var t=a.a.useState([]),n=Object(U.a)(t,2),r=n[0],s=n[1];return a.a.useEffect((function(){A.a.send("VKWebAppCallAPIMethod",{method:"friends.get",params:{order:"hints",fields:"nickname,photo_100",v:"5.21",access_token:e.access_token}}).then((function(e){return s(e.response.items)})).catch((function(e){return console.error(e)}))}),[e]),Object(c.jsx)(N.m,{header:Object(c.jsx)(N.n,{mode:"primary",children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b"}),mode:"plain",children:function(e){return e.map((function(e){return Object(c.jsxs)(N.x,{before:Object(c.jsx)(N.b,{src:e.photo_100,size:48}),children:[e.first_name," ",e.last_name]})}))}(r)})})),Y=n(135);function Z(e){return Object(c.jsxs)(N.m,{header:Object(c.jsx)(N.n,{mode:"secondary",children:"\u041d\u0435\u0442 \u043f\u0440\u043e\u0441\u0440\u043e\u0447\u0435\u043d\u043d\u044b\u0445 \u0434\u043e\u043b\u0433\u043e\u0432"}),children:[Object(c.jsx)(N.f,{before:Object(c.jsx)(Y.a,{}),disabled:!0,children:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0441\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0443"}),Object(c.jsx)(N.f,{before:Object(c.jsx)(F.a,{}),onClick:function(){return e.onModalShow&&e.onModalShow("add-debt")},children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0434\u043e\u043b\u0433"})]})}function $(e){return Object(c.jsxs)(N.s,{id:e.id,children:[Object(c.jsx)(N.t,{children:"\u0414\u043e\u043b\u0433\u0438"}),Object(c.jsx)(Z,{onModalShow:e.onShowModal}),Object(c.jsx)(L,{}),Object(c.jsx)(X,{})]})}function ee(e){var t=a.a.useState(null),n=Object(U.a)(t,2),r=n[0],s=n[1];var i=Object(c.jsx)(N.r,{activeModal:r,onClose:function(){return s(null)},children:Object(c.jsx)(N.p,{id:"add-debt",header:Object(c.jsx)(N.q,{left:Object(c.jsx)(N.u,{onClick:function(){return s(null)},children:Object(c.jsx)(W.a,{})}),children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0434\u043e\u043b\u0433"}),children:Object(c.jsxs)(N.m,{children:[Object(c.jsxs)(N.k,{children:[Object(c.jsxs)(N.l,{mode:"horizontal",children:[Object(c.jsx)(N.j,{children:Object(c.jsx)(N.v,{name:"type",value:"lent",defaultChecked:!0,children:"\u0414\u0430\u043b \u0432 \u0434\u043e\u043b\u0433"})}),Object(c.jsx)(N.j,{children:Object(c.jsx)(N.v,{name:"type",value:"borrowed",children:"\u0414\u0430\u043b \u0432 \u0434\u043e\u043b\u0433"})})]}),Object(c.jsxs)(N.l,{mode:"horizontal",children:[Object(c.jsx)(N.j,{top:"\u0421\u0443\u043c\u043c\u0430",children:Object(c.jsx)(N.o,{placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u0443\u043c\u043c\u0443"})}),Object(c.jsx)(N.j,{top:"\u0412\u0430\u043b\u044e\u0442\u0430",children:Object(c.jsx)(N.w,{options:[{value:"RUB",label:"RUB"},{value:"USD",label:"USD"}],placeholder:"\u0412\u0430\u043b\u044e\u0442\u0430",defaultValue:"RUB"})})]})]}),Object(c.jsx)(N.j,{top:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442",children:Object(c.jsx)(N.w,{placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043a\u043e\u043d\u0442\u0430\u043a\u0442",options:[],renderOption:function(e){var t=e.option,n=Object(V.a)(e,["option"]);return Object(c.jsx)(N.g,Object(K.a)(Object(K.a)({},n),{},{before:Object(c.jsx)(N.b,{size:24,src:t.avatar})}))}})}),Object(c.jsx)(N.j,{top:"\u0414\u0430\u0442\u0430 \u0432\u043e\u0437\u0432\u0440\u0430\u0442\u0430",children:Object(c.jsx)(N.h,{min:{day:1,month:1,year:1901},max:{day:1,month:1,year:2020},dayPlaceholder:"\u0414",monthPlaceholder:"\u041c\u041c",yearPlaceholder:"\u0413\u0413"})}),Object(c.jsx)(N.j,{children:Object(c.jsx)(N.c,{mode:"primary",size:"l",before:Object(c.jsx)(F.a,{}),stretched:!0,children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"})})]})})});return Object(c.jsx)(N.A,{id:e.id,modal:i,activePanel:e.activePanel,children:Object(c.jsx)($,{id:e.id,onShowModal:function(e){return s(e)}})})}function te(e){return Object(c.jsx)(N.A,{id:e.id,activePanel:e.activePanel,children:Object(c.jsx)(J,{id:e.id})})}!function(e){e.Catalog="catalog",e.App="app"}(Q||(Q={}));var ne=Q;var ce=Object(o.b)(null,(function(e){return{fetchAccessToken:Object(j.bindActionCreators)(I,e)}}))((function(e){var t=a.a.useState(ne.App),n=Object(U.a)(t,2),r=n[0],s=n[1];function i(e){return s(e.currentTarget.dataset.story)}return a.a.useEffect((function(){e.fetchAccessToken()}),[e]),Object(c.jsx)(N.a,{children:Object(c.jsxs)(N.i,{activeStory:r,tabbar:Object(c.jsxs)(N.y,{children:[Object(c.jsx)(N.z,{onClick:i,selected:r===ne.Catalog,"data-story":ne.Catalog,children:Object(c.jsx)(B.a,{})}),Object(c.jsx)(N.z,{onClick:i,selected:r===ne.App,"data-story":ne.App,children:Object(c.jsx)(D.a,{})})]}),children:[Object(c.jsx)(te,{id:ne.Catalog,activePanel:ne.Catalog}),Object(c.jsx)(ee,{id:ne.App,activePanel:ne.App})]})})}));function re(){return Object(c.jsx)(o.a,{store:R,children:Object(c.jsx)(ce,{})})}n(133);i.a.render(Object(c.jsx)(re,{}),document.getElementById("root"))}},[[134,1,2]]]);
//# sourceMappingURL=main.297c264b.chunk.js.map