(this["webpackJsonpfinbox-mini-app"]=this["webpackJsonpfinbox-mini-app"]||[]).push([[0],{144:function(e,t,n){},146:function(e,t,n){"use strict";n.r(t);var c=n(7),r=n(0),a=n.n(r),s=n(21),i=n.n(s),o=n(26),j=n(16),u=n(47),d=n(41),l=n.n(d),b=n(42),p="SET_USER",f="FETCH_ACCESS_TOKEN",h={access_token:""};var O=function(e){return e.user},x=Object(j.combineReducers)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p:return t.payload.user;default:return e}}}),m=n(19),v=n.n(m),k=n(27),g=n(22),_=n.n(g),A=v.a.mark(y);function y(){var e;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_.a.send("VKWebAppGetAuthToken",{app_id:7712603,scope:"friends"}).catch((function(){alert("\u041f\u0440\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u043e \u043a\u0440\u0438\u0442\u0438\u0447\u0435\u0441\u043a\u0430\u044f \u043e\u0448\u0438\u0431\u043a\u0430. \u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0435 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435.")}));case 2:return e=t.sent,t.next=5,Object(k.b)({type:p,payload:{user:{access_token:e.access_token}}});case 5:case"end":return t.stop()}}),A)}var C=v.a.mark(w);function w(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(k.c)(f,y);case 2:case"end":return e.stop()}}),C)}var E=v.a.mark(S);function S(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(k.a)([w()]);case 2:case"end":return e.stop()}}),E)}var T=n(43),N=Object(u.a)(),K=Object(j.createStore)(x,Object(b.composeWithDevTools)(Object(j.applyMiddleware)(l.a,N)));Object(T.a)();N.run(S);var P=n(32),W=n(9),z=n(147),I=n(148);function J(){return{type:f}}function M(e){return Object(c.jsx)(W.h,{id:e.id,children:Object(c.jsx)(W.i,{children:"\u041a\u0430\u0442\u0430\u043b\u043e\u0433"})})}var R=n(46),V=(n(144),Object(R.block)("dashboard-card"));function B(e){return Object(c.jsx)(W.c,{children:Object(c.jsxs)("div",{className:V(),children:[Object(c.jsx)("span",{className:V("subtitle"),children:e.subtitle}),Object(c.jsx)("strong",{className:V("title"),children:e.title})]})})}function D(){return Object(c.jsx)(W.f,{header:Object(c.jsx)(W.g,{mode:"primary",children:"\u0410\u043a\u0442\u0438\u0432\u043d\u044b\u0435 \u0434\u043e\u043b\u0433\u0438"}),mode:"plain",children:Object(c.jsx)(W.d,{size:"m",children:Object(c.jsx)(B,{subtitle:"\u0414\u0430\u043b \u0432 \u0434\u043e\u043b\u0433",title:"125 000 \u20bd"})})})}var F,G=Object(o.b)((function(e){return{access_token:O(e).access_token}}))((function(e){var t=a.a.useState([]),n=Object(P.a)(t,2),r=n[0],s=n[1];return a.a.useEffect((function(){console.log(e.access_token),_.a.send("VKWebAppCallAPIMethod",{method:"friends.get",params:{order:"hints",fields:"nickname,photo_100",v:"5.21",access_token:e.access_token}}).then((function(e){s(e.response.items)})).catch((function(e){return console.error(e)}))}),[e]),Object(c.jsx)(W.f,{header:Object(c.jsx)(W.g,{mode:"primary",children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b"}),mode:"plain",children:function(e){return e.map((function(e){return Object(c.jsxs)(W.j,{before:Object(c.jsx)(W.b,{src:e.photo_100,size:48}),children:[e.first_name," ",e.last_name]})}))}(r)})}));function H(e){return Object(c.jsxs)(W.h,{id:e.id,children:[Object(c.jsx)(W.i,{children:"\u0414\u043e\u043b\u0433\u0438"}),Object(c.jsx)(D,{}),Object(c.jsx)(G,{})]})}!function(e){e.Catalog="catalog",e.App="app"}(F||(F={}));var U=F;var q=Object(o.b)(null,(function(e){return{fetchAccessToken:Object(j.bindActionCreators)(J,e)}}))((function(e){var t=a.a.useState(U.App),n=Object(P.a)(t,2),r=n[0],s=n[1];function i(e){return s(e.currentTarget.dataset.story)}return a.a.useEffect((function(){e.fetchAccessToken()}),[e]),Object(c.jsx)(W.a,{children:Object(c.jsxs)(W.e,{activeStory:r,tabbar:Object(c.jsxs)(W.k,{children:[Object(c.jsx)(W.l,{onClick:i,selected:r===U.Catalog,"data-story":U.Catalog,children:Object(c.jsx)(z.a,{})}),Object(c.jsx)(W.l,{onClick:i,selected:r===U.App,"data-story":U.App,children:Object(c.jsx)(I.a,{})})]}),children:[Object(c.jsx)(W.m,{id:U.Catalog,activePanel:U.Catalog,children:Object(c.jsx)(M,{id:U.Catalog})}),Object(c.jsx)(W.m,{id:U.App,activePanel:U.App,children:Object(c.jsx)(H,{id:U.App})})]})})}));function L(){return Object(c.jsx)(o.a,{store:K,children:Object(c.jsx)(q,{})})}n(145);i.a.render(Object(c.jsx)(L,{}),document.getElementById("root"))}},[[146,1,2]]]);
//# sourceMappingURL=main.776f5b3d.chunk.js.map